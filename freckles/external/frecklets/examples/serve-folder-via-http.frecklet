doc:
    help: |
      Downloads the basic [http](https://github.com/thecoshman/http) server executable,
      sets it up as a systemd service and host a newly created folder and file via the http protocol.

      On some systems this might not work because of a missing libssl1.0.o library that the
      ``http`` binary is compiled against.

meta:
    tags:
      - example

tasks:
    - file-downloaded:
        url: https://github.com/thecoshman/http/releases/download/v1.4.0/http-v1.4.0
        mode: "0775"
        dest: /opt/http-service/http
        owner: freckles
        become_user: root
    - file-exists-with-content:
        path: /home/freckles/example/example_file
        owner: freckles
        content: |
          hello world!
        become_user: root
    - systemd-unit-exists:
        name: http
        ServiceUser: freckles
        ExecStart: /opt/http-service/http --port 8080 /home/freckles/example
        enabled: true
        started: true
