doc:
  short_help: Ensures a folder exists.
  help: |
    Ensures a folder exists on the filesystem

    If the ``owner`` and/or ``group`` variables is/are specified, those will be created if they don't exist yet.

args:
  path:
    doc:
      short_help: The path to the folder.
    type: string
    required: true
    cli:
      param_type: argument
  owner:
    doc:
      short_help: The owner of the folder, will be created if necessary.
    type: string
    required: false
    cli:
      metavar: USER_NAME
  group:
    doc:
      short_help: The group of the folder, will be created if necessary.
    type: string
    required: false
    cli:
      metavar: GROUP_NAME
  mode:
    doc:
      short_help: The permissions of the folder.
    type: string
    required: false
    cli:
      metavar: MODE
  become:
    doc:
      short_help: Whether to use root privileges to create the folder.
    type: boolean
    default: false
    required: false
    cli:
      is_flag: true
  system_user:
    doc:
      short_help: Whether the user (and group) should be of system user/group type.
    type: boolean
    default: false
    required: false
    cli:
      show_default: true
      is_flag: true

meta:
  is_interface: true
  tags:
    - file
    - filesystem
    - folder
    - mkdir
    - featured-frecklecutable

frecklets:
  - group-exists:
      group: "{{:: group ::}}"
      system_group: "{{:: system_user | default(omit) ::}}"
      frecklet.__skip__: "{{:: group | true_if_empty ::}}"
  - user-exists:
      name: "{{:: owner ::}}"
      system_user: "{{:: system_user | default(omit) ::}}"
      frecklet.__skip__: "{{:: owner | true_if_empty ::}}"
  - folder-exists-impl:
      become: "{{:: become ::}}"
      path: "{{:: path ::}}"
      owner: "{{:: owner | default(omit) ::}}"
      group: "{{:: group | default(omit) ::}}"
      mode: "{{:: mode | default(omit) ::}}"


